<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <ul id="messages"></ul>
    <form onsubmit="send_message(event);">
      <input id="chat" autocomplete="off" /><button class="send_message_button">전송</button>
    </form>
  </body>
  <script src="/static/socket.io.js" charset="utf-8"></script>
  <script type="text/javascript">
    'use strict';
    const Socket = io.connect('http://localhost:8080');
    Socket.emit('room_request', '{{roomID}}')
    console.log(Socket);
    Socket.on('message', (data)=> {
      console.log(data);
      let chatLog = document.getElementById('messages');
      let chat = document.createElement("li");
      chat.innerHTML = data;
      chatLog.appendChild(chat);
    });

    function send_message(event) {
      event.preventDefault();
      let chatInput = document.querySelector('#chat')
      let message = chatInput.value;
      Socket.emit('message', message);
      chatInput.value = '';
    };

  </script>
</html>
